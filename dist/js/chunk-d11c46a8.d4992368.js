(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d11c46a8"],{"0f3e":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d2-container",{staticClass:"page",attrs:{type:"full"}},[[r("el-form",{attrs:{inline:!0,model:e.searchItem,size:"large"}},[r("el-form-item",{staticStyle:{width:"296px"},attrs:{label:"大客户名字"}},[r("el-autocomplete",{staticStyle:{width:"200px"},attrs:{placeholder:"大客户名字",clearable:"","fetch-suggestions":e.querySearchAsync},on:{select:e.handleSelect},model:{value:e.customerName,callback:function(t){e.customerName=t},expression:"customerName"}})],1),r("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"线路别名"}},[r("el-autocomplete",{staticStyle:{width:"200px"},attrs:{placeholder:"线路别名",clearable:"","fetch-suggestions":e.querySearchAsyncRouter},on:{select:e.handleSelectRouter},model:{value:e.routerAlial,callback:function(t){e.routerAlial=t},expression:"routerAlial"}})],1),r("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"是否需要搬卸"}},[r("el-select",{model:{value:e.createOrder.wetherTakeover,callback:function(t){e.$set(e.createOrder,"wetherTakeover",t)},expression:"createOrder.wetherTakeover"}},e._l(e.takeOver,function(e){return r("el-option",{key:e.text,attrs:{label:e.text,value:e.value}})}))],1),r("el-form-item",{attrs:{label:"发货人名字"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"发货人名字"},model:{value:e.createOrder.sendGoodsPersonName,callback:function(t){e.$set(e.createOrder,"sendGoodsPersonName",t)},expression:"createOrder.sendGoodsPersonName"}})],1),r("el-form-item",{attrs:{label:"发货人电话"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"发货人电话"},model:{value:e.createOrder.sendGoodsPersonMobile,callback:function(t){e.$set(e.createOrder,"sendGoodsPersonMobile",t)},expression:"createOrder.sendGoodsPersonMobile"}})],1),r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"发货人地址"}},[r("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"发货人地址"},model:{value:e.createOrder.sendAddressDetail,callback:function(t){e.$set(e.createOrder,"sendAddressDetail",t)},expression:"createOrder.sendAddressDetail"}})],1),r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"发货地(省/市/区/县/)"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{size:"large",disabled:""},model:{value:e.sourceLocalction,callback:function(t){e.sourceLocalction=t},expression:"sourceLocalction"}})],1),r("el-form-item",{attrs:{label:"收货人名字"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"收货人名字"},model:{value:e.createOrder.receiveGoodsPersonName,callback:function(t){e.$set(e.createOrder,"receiveGoodsPersonName",t)},expression:"createOrder.receiveGoodsPersonName"}})],1),r("el-form-item",{attrs:{label:"收货人电话"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"收货人电话"},model:{value:e.createOrder.receiveGoodsPersonMobile,callback:function(t){e.$set(e.createOrder,"receiveGoodsPersonMobile",t)},expression:"createOrder.receiveGoodsPersonMobile"}})],1),r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"收货人地址"}},[r("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"收货人地址"},model:{value:e.createOrder.receiveAddressDetail,callback:function(t){e.$set(e.createOrder,"receiveAddressDetail",t)},expression:"createOrder.receiveAddressDetail"}})],1),r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"收货地(省/市/区/县/)"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.destinationLocalction,callback:function(t){e.destinationLocalction=t},expression:"destinationLocalction"}})],1),r("el-form-item",{staticStyle:{width:"285px"},attrs:{label:"车型和车长"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择车型和车长"},model:{value:e.carTypeAndSize,callback:function(t){e.carTypeAndSize=t},expression:"carTypeAndSize"}},e._l(e.carAndPriceModels,function(e){return r("el-option",{key:e.typeName,attrs:{label:e.typeName,value:e.typeName}})}))],1),r("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"路径站点个数"}},[r("el-input",{staticStyle:{width:"195px"},attrs:{placeholder:"路径站点个数"},model:{value:e.createOrder.sendGoodsLocationNum,callback:function(t){e.$set(e.createOrder,"sendGoodsLocationNum",t)},expression:"createOrder.sendGoodsLocationNum"}})],1),r("el-form-item",{staticStyle:{width:"1200px"},attrs:{label:"约车时间"}},[r("el-date-picker",{attrs:{size:"large",type:"datetime",placeholder:"请选择约车时间",align:"right","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions},model:{value:e.createOrder.appointmentDate,callback:function(t){e.$set(e.createOrder,"appointmentDate",t)},expression:"createOrder.appointmentDate"}})],1),r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"补充信息"}},[r("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:7,placeholder:"补充信息"},model:{value:e.createOrder.remark,callback:function(t){e.$set(e.createOrder,"remark",t)},expression:"createOrder.remark"}})],1),r("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"货物信息"}},[r("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",rows:7,placeholder:"货物信息"},model:{value:e.createOrder.goodsRemark,callback:function(t){e.$set(e.createOrder,"goodsRemark",t)},expression:"createOrder.goodsRemark"}})],1),r("el-form-item",{staticStyle:{width:"1700px"}},[r("el-button",{attrs:{type:"primary",loading:e.searching},on:{click:e._createOrderByWeb}},[e._v("确认下单")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.cancelSign()}}},[e._v("重置")])],1)],1)]],2)},a=[],i=r("113c"),c=(r("25d7"),r("2c8d")),o=r("f62d");function n(e){var t="/getMasterCustomerListBySearchKey",r=Object(o["e"])(),s={sid:Object(o["b"])(),timestamp:r,params:Object(o["a"])(e),sign:Object(o["c"])(e,r)};return Object(c["a"])(t,s)}function d(e){var t="/getRouterAliaByCustomerMasterId",r=Object(o["e"])(),s={sid:Object(o["b"])(),timestamp:r,params:Object(o["a"])(e),sign:Object(o["c"])(e,r)};return Object(c["a"])(t,s)}function l(e){var t="/getCustomerRouterDetail",r=Object(o["e"])(),s={sid:Object(o["b"])(),timestamp:r,params:Object(o["a"])(e),sign:Object(o["c"])(e,r)};return Object(c["a"])(t,s)}function u(e){var t="/getPriceAndCarByCustomerIdAndRouterSeries",r=Object(o["e"])(),s={sid:Object(o["b"])(),timestamp:r,params:Object(o["a"])(e),sign:Object(o["c"])(e,r)};return Object(c["a"])(t,s)}function m(e){var t="/createOrderByEmployee",r=Object(o["e"])(),s={sid:Object(o["b"])(),timestamp:r,params:Object(o["a"])(e),sign:Object(o["c"])(e,r)};return Object(c["a"])(t,s)}var h=r("c276"),p={data:function(){return{searching:!1,value5:"",customerNumId:h["a"].cookies.get("__user__customernumid"),franchiseeId:"",currentPage:1,pageSize:200,searchItem:{saleId:"",contactNameSearchKey:"",customerNameSearchKey:"",mobilePhoneSearchKey:"",registerEndTime:"",registerStartTime:"",registerTime:""},takeOver:[{text:"是",value:"Y"},{text:"否",value:"N"}],carAndPriceModels:[],carTypeAndSize:"",priceAndInstance:"",overPrice:"",carAndPriceModel:{carTypeName:"",carSizeName:"",typeName:"",initPrice:"",initDistance:"",overstepPrice:""},customerName:"",routerAlial:"",sourceLocalction:"",destinationLocalction:"",createOrder:{carTypeSeries:"",carSizeSeries:"",customerNumId:h["a"].cookies.get("__user__customernumid"),customerMasterId:"",wetherSpecialCustomerPrice:"",routerDetailSeries:"",routerPriceSeries:"",sendGoodsPersonName:"",sendGoodsPersonMobile:"",sendGoodsLocationNum:"",appointmentNum:"",deliverGoodsTime:"",receiveGoodsPersonName:"",receiveGoodsPersonMobile:"",receiveGoodsLocationNum:"",sendAddressDetail:"",receiveAddressDetail:"",wetherTakeover:"N",remark:"",appointmentDate:"",initPrice:"",initDistance:"",overstepPrice:"",goodsRemark:""},masterCustomerSearchKey:{customerMasterSearchKey:"",customerNumId:""},tableData:[],customerSales:[],customerMaster:[],routerDetails:[],customerDetail:{}}},created:function(){this._getMasterCustomerListBySearchKey({customerNumId:this.customerNumId})},watch:{"createOrder.customerMasterId":function(){this._getAllRouterAlia({customerNumId:this.customerNumId,customerMasterId:this.createOrder.customerMasterId})},"createOrder.routerDetailSeries":function(){this._getCustomerRouterDetail({customerNumId:this.customerNumId,routerDetailSeries:this.createOrder.routerDetailSeries}),this._getPriceAndCarByCustomerIdAndRouterSeries({customerNumId:this.customerNumId,routerDetailSeries:this.createOrder.routerDetailSeries,customerMasterId:this.createOrder.customerMasterId,wetherSpecialCustomerPrice:this.createOrder.wetherSpecialCustomerPrice})},carTypeAndSize:function(){for(var e=0;e<this.carAndPriceModels.length;e++)this.carAndPriceModels[e].typeName==this.carTypeAndSize&&(this.createOrder.carTypeSeries=this.carAndPriceModels[e].carTypeName,this.createOrder.carSizeSeries=this.carAndPriceModels[e].carSizeName,this.createOrder.initPrice=this.carAndPriceModels[e].initPrice,this.createOrder.initDistance=this.carAndPriceModels[e].initDistance,this.createOrder.overstepPrice=this.carAndPriceModels[e].overstepPrice,this.createOrder.routerPriceSeries=this.carAndPriceModels[e].routerPriceId,this.priceAndInstance=this.carAndPriceModels[e].initPrice+"元/"+this.carAndPriceModels[e].initDistance+"公里",this.overPrice=this.carAndPriceModels[e].overstepPrice+"元/公里")}},methods:{querySearchAsync:function(e,t){var r=this;this.masterCustomerSearchKey.customerMasterSearchKey=e,this.masterCustomerSearchKey.customerNumId=this.customerNumId,n(this.masterCustomerSearchKey).then(function(s){if(0===s.code){var a=[];s.customerMasterList.forEach(function(e){a.push(Object(i["a"])({value:e.customerName},e))}),r.customerMaster=a;var c=r.customerMaster,o=e?c.filter(r.createStateFilter(e)):c;t(o)}})},createStateFilter:function(e){return function(t){return-1!=t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.createOrder.customerMasterId=e.customerMasterId},querySearchAsyncRouter:function(e,t){var r=this.routerDetails,s=e?r.filter(this.createStateFilterRouter(e)):r;t(s)},createStateFilterRouter:function(e){return function(t){return-1!=t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelectRouter:function(e){this.createOrder.routerDetailSeries=e.series},_getAllRouterAlia:function(e){var t=this;d(e).then(function(e){if(0===e.code){var r=[];e.routerAliaModels.forEach(function(e){r.push(Object(i["a"])({value:e.routerAlia},e))}),t.routerDetails=r,t.createOrder.wetherSpecialCustomerPrice=e.weatherSpecialCustomer}}).catch(function(e){console.log(e)})},_getMasterCustomerListBySearchKey:function(e){var t=this;n(e).then(function(e){if(0===e.code){var r=[];e.customerMasterList.forEach(function(e){r.push(Object(i["a"])({value:e.customerName},e))}),t.customerMaster=r}}).catch(function(e){console.log(e)})},_getCustomerRouterDetail:function(e){var t=this;l(e).then(function(e){0===e.code&&(t.createOrder.sendGoodsPersonName=e.sendGoodsPersonName,t.createOrder.sendGoodsPersonMobile=e.sendGoodsPersonMobile,t.createOrder.sendAddressDetail=e.sendAddressDetail,t.createOrder.receiveGoodsPersonName=e.receiveGoodsPersonName,t.createOrder.receiveGoodsPersonMobile=e.receiveGoodsPersonMobile,t.createOrder.receiveAddressDetail=e.receiveAddressDetail,t.createOrder.sendGoodsLocationNum=e.sendGoodsLocationNum,t.createOrder.sendGoodsLocationNum=e.sendGoodsLocationNum,t.sourceLocalction=e.sourcePrvName+"/"+e.sourceCityName+"/"+e.sourceCityAreaName+"/"+e.sourceTownName,t.destinationLocalction=e.destinationPrvName+"/"+e.destinationCityName+"/"+e.destinationCityAreaName+"/"+e.destinationTownName)}).catch(function(e){console.log(e)})},_getPriceAndCarByCustomerIdAndRouterSeries:function(e){var t=this;u(e).then(function(e){0===e.code&&(t.carAndPriceModels=e.carAndPriceModels)}).catch(function(e){console.log(e)})},_createOrderByWeb:function(){var e=this;return this.searching=!0,""===this.createOrder.customerMasterId?(this.$message({type:"error",message:"大客户名字不可以为空！"}),void(this.searching=!1)):""===this.createOrder.routerDetailSeries?(this.$message({type:"error",message:"线路不可以为空！"}),void(this.searching=!1)):""===this.createOrder.carSizeSeries?(this.$message({type:"error",message:"车型车长不可以为空！"}),void(this.searching=!1)):""===this.createOrder.appointmentDate?(this.$message({type:"error",message:"约车时间不可以为空！"}),void(this.searching=!1)):""===this.createOrder.initPrice?(this.$message({type:"error",message:"订单报价不可以为空！请去维护"}),void(this.searching=!1)):""===this.createOrder.sendGoodsPersonName?(this.$message({type:"error",message:"发货人名字不可以为空！"}),void(this.searching=!1)):""===this.createOrder.sendGoodsPersonMobile?(this.$message({type:"error",message:"发货人手机不可以为空！"}),void(this.searching=!1)):""===this.createOrder.sendAddressDetail?(this.$message({type:"error",message:"发货人地址不可以为空！"}),void(this.searching=!1)):""===this.createOrder.receiveGoodsPersonName?(this.$message({type:"error",message:"收货人名字不可以为空！"}),void(this.searching=!1)):""===this.createOrder.receiveGoodsPersonMobile?(this.$message({type:"error",message:"收货人手机不可以为空！"}),void(this.searching=!1)):""===this.createOrder.receiveAddressDetail?(this.$message({type:"error",message:"收货人地址不可以为空！"}),void(this.searching=!1)):(this.$confirm("是否确定下单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){m(e.createOrder).then(function(t){0===t.code&&(e.$message.success("创建手工单成功！"),cancelSign())}).catch(function(e){console.log(e)})}),void(this.searching=!1))},cancelSign:function(){this.$confirm("是否清除此页下单数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){location.reload()})}}},f=p,O=(r("19d6"),r("048f")),y=Object(O["a"])(f,s,a,!1,null,"b2ab1dc8",null);y.options.__file="index.vue";t["default"]=y.exports},"19d6":function(e,t,r){"use strict";var s=r("828c"),a=r.n(s);a.a},"828c":function(e,t,r){}}]);
//# sourceMappingURL=chunk-d11c46a8.d4992368.js.map